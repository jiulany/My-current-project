{"version":3,"sources":["webpack:///./src/components/choice_pay_type/choice_pay_type.vue?5617","webpack:///./src/components/choice_pay_type/choice_pay_type.vue?d54c","webpack:///./src/components/choice_pay_type/choice_pay_type.vue?8da2","webpack:///./src/components/choice_pay_type/choice_pay_type.vue?006d","webpack:///./src/components/choice_pay_type/choice_pay_type.vue","webpack:///./src/components/choice_pay_type/choice_pay_type.vue?fd67","webpack:///./src/components/choice_pay_type/choice_pay_type.vue?02ef"],"names":["orderModel","OrderModel","name","props","order_id","type","String","data","pay_checked","list","balance_lock","methods","_subPay","total_price","params","paymentForFree","then","res","code","uni","showToast","title","message","navigateTo","url","is_password_payment","$emit","showModal","content","success","showResult","confirm","yuonpay","subPay","_pay","_provider","Promise","resolve","reject","getProvider","service","console","log","provider","JSON","parse","requestPayment","timeStamp","nonceStr","package","signType","paySign","stringify","fail","err","_getOrder","getOrders","pay_type","radioChange","id","icon","mounted","watch","handler","val"],"mappings":"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","file":"components/choice_pay_type/choice_pay_type.js","sourcesContent":["import { render, staticRenderFns } from \"./choice_pay_type.vue?vue&type=template&id=60f0832f&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./choice_pay_type.vue?vue&type=script&lang=js&\"\nexport * from \"./choice_pay_type.vue?vue&type=script&lang=js&\"\nimport style0 from \"./choice_pay_type.vue?vue&type=style&index=0&id=60f0832f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60f0832f\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\tgcb_uni_app\\\\tgcb_uni_app\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('60f0832f')) {\n      api.createRecord('60f0832f', component.options)\n    } else {\n      api.reload('60f0832f', component.options)\n    }\n    module.hot.accept(\"./choice_pay_type.vue?vue&type=template&id=60f0832f&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('60f0832f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/choice_pay_type/choice_pay_type.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./choice_pay_type.vue?vue&type=template&id=60f0832f&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./choice_pay_type.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./choice_pay_type.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import {OrderModel} from \"../../model/order\";\nimport { setTimeout } from 'timers';\n    const  orderModel = new OrderModel()\n    export default {\n        name: \"pay\",\n        props:{\n            order_id:{\n                type:String\n            }\n        },\n        data(){\n            return{\n                pay_checked:true,\n                list:{},\n                balance_lock:true,\n            }\n        },\n        methods:{\n            _subPay(){\n                if (this.list.total_price == 0) {\n                    let params = {\n                        order_id:this.list.order_id,\n                    }\n                    orderModel.paymentForFree(params).then((res)=>{\n                        if (res.code == 200) {\n                            uni.showToast({\n                                title:res.message,\n                            })\n                            setTimeout(()=>{\n                                uni.navigateTo({\n                                    url:`/pagesC/payment_finish/payment_finish?order_id=${this.list.order_id}`\n                                })\n                            },2000)\n                        }\n                    })\n                } else {\n                    if (this.pay_checked == 1) {\n                        if (this.list.is_password_payment == 0) {\n                            this.$emit('close_pay_type')\n                            uni.navigateTo({\n                                url:`/pagesB/payment_index/payment_index?order_id=${this.list.order_id}`\n                            })\n                        } else {\n                            uni.showModal({\n                                title: \"支付提示\",\n                                content: '您已开通免密支付,确认直接支付该订单?',\n                                success: showResult => {\n                                    if (showResult.confirm) {\n                                        this.$emit('close_pay_type')\n                                        // plus.runtime.openURL(openUrl);\n                                        let params = {\n\t\t\t\t\t\t\t\t            order_id:this.list.order_id\n\t\t\t\t\t\t\t            }\n                                        orderModel.yuonpay(params).then((res) => {\n                                            if (res.code == 200) {\n                                                uni.showToast({\n                                                    title:'支付成功',\n                                                })\n                                                setTimeout(()=>{\n                                                    uni.navigateTo({\n                                                        url:`/pagesC/payment_finish/payment_finish?order_id=${this.list.order_id}`\n                                                    })\n                                                },2000)\n                                            }\n\t\t\t\t\t\t\t            })\n                                    }\n                                }\n                            })\n                        }\n                    } else {\n                        let data = {\n                            order_id:this.list.order_id,\n                            type:1\n                        }\n                        orderModel.subPay(data).then((res) => {\n                            this._pay(res.data)\n                        })\n                    }\n                    \n                }\n                \n            },\n             _provider(){\n               return new Promise((resolve,reject)=>{\n                    uni.getProvider({\n                        service: 'payment',\n                        success: function (res) {\n                            console.log(res.provider[0])\n                            resolve(res.provider[0])\n                        }}\n                    )\n                })\n\n            },\n           async _pay(list){\n                const data = JSON.parse(list)\n                // let SystemInfo = uni.getStorageSync('SystemInfo')\n                let provider = await this._provider()\n               console.log(provider)\n                uni.requestPayment({\n                    provider,\n                    timeStamp: data.timeStamp,\n                    nonceStr: data.nonceStr,\n                    package: data.package,\n                    signType: 'MD5',\n                    paySign: data.paySign,\n                    success: function (res) {\n                        console.log('success:' + JSON.stringify(res));\n                    },\n                    fail: function (err) {\n                        console.log('fail:' + JSON.stringify(err));\n                    }\n                })\n            },\n            _getOrder(){\n                console.log('order_id'+this.order_id)\n                let data={\n                    order_id: this.order_id\n                }\n                orderModel.getOrders(data).then((res) => {\n                    if(res.data){\n                        this.list = res.data\n                        this.balance_lock = res.data.pay_type == 2 ? true : false;\n                        this.pay_checked = this.list.pay_type\n                    }\n\n                })\n            },\n            radioChange(id){\n                if(this.list.pay_type == 2 && id == \"1\") {\n                    this.pay_checked = false\n                    uni.showToast({\n                        title:'余额不足',\n                        icon:'none'\n                    })\n                } else {\n                    this.pay_checked = id\n                }\n            },\n\n        },\n        mounted(){\n            console.log('mounted')\n        },\n        watch:{\n            order_id:{\n                handler:function(val){\n                    this._getOrder()\n                },\n                // immediate:true, // 一进来就调\n            },\n        }\n    }\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./choice_pay_type.vue?vue&type=style&index=0&id=60f0832f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./choice_pay_type.vue?vue&type=style&index=0&id=60f0832f&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1571385030838\n      var cssReload = require(\"C:/Users/Administrator/Desktop/tgcb_uni_app/tgcb_uni_app/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}