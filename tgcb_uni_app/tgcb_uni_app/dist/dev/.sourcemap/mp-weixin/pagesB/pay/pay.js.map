{"version":3,"sources":["webpack:///./src/pagesB/pay/pay.vue?f20b","webpack:///./src/pagesB/pay/pay.vue?a23c","webpack:///./src/pagesB/pay/pay.vue?a064","webpack:///./src/pagesB/pay/pay.vue?e435","webpack:///./src/pagesB/pay/pay.vue","webpack:///./src/pagesB/pay/pay.vue?19ca","webpack:///./src/pagesB/pay/pay.vue?23d3"],"names":["orderModel","OrderModel","name","data","pay_checked","balance_lock","list","methods","_subPay","total_price","params","internal_payment_sn","paymentForFree","then","res","code","uni","showToast","title","message","setTimeout","navigateTo","url","is_password_payment","$emit","showModal","content","success","showResult","confirm","yuonpay","type","subPay","_pay","_provider","Promise","resolve","reject","getProvider","service","console","log","provider","JSON","parse","requestPayment","timeStamp","nonceStr","package","signType","paySign","stringify","fail","err","radioChange","id","pay_type","icon","_getOrder","getOrders","_getAnnualReview","getAnnualReview","onLoad","option"],"mappings":"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","file":"pagesB/pay/pay.js","sourcesContent":["import { render, staticRenderFns } from \"./pay.vue?vue&type=template&id=441cfec9&scoped=true&filter-modules=%7B%7D&\"\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay.vue?vue&type=style&index=0&id=441cfec9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"441cfec9\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\tgcb_uni_app\\\\tgcb_uni_app\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('441cfec9')) {\n      api.createRecord('441cfec9', component.options)\n    } else {\n      api.reload('441cfec9', component.options)\n    }\n    module.hot.accept(\"./pay.vue?vue&type=template&id=441cfec9&scoped=true&filter-modules=%7B%7D&\", function () {\n      api.rerender('441cfec9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pagesB/pay/pay.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=template&id=441cfec9&scoped=true&filter-modules=%7B%7D&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import {OrderModel} from \"../../model/order\";\n    const  orderModel = new OrderModel()\n    export default {\n        name: \"pay\",\n        data(){\n            return{\n                pay_checked:true,\n                balance_lock:true,\n                list:[]\n            }\n        },\n        methods:{\n            _subPay(){\n                if (this.list.total_price == 0) {\n                    let params = {\n                        internal_payment_sn:this.list.internal_payment_sn,\n                    }\n                    orderModel.paymentForFree(params).then((res)=>{\n                        if (res.code == 200) {\n                            uni.showToast({\n                                title:res.message,\n                            })\n                            setTimeout(()=>{\n                                uni.navigateTo({\n                                     url:`/pagesC/payment_finish/payment_finish?internal_payment_sn=${this.list.internal_payment_sn}`\n                                 })\n                            },2000)\n                        }\n                    })\n                } else {\n                    if (this.pay_checked == 1) {\n                        if (this.list.is_password_payment == 0) {\n                            this.$emit('close_pay_type')\n                            uni.navigateTo({\n                                     url:`/pagesB/payment_index/payment_index?internal_payment_sn=${this.list.internal_payment_sn}`\n                            })\n                        } else {\n                            uni.showModal({\n                                title: \"支付提示\",\n                                content: '您已开通免密支付,确认直接支付该订单?',\n                                success: showResult => {\n                                    if (showResult.confirm) {\n                                        this.$emit('close_pay_type')\n                                        // plus.runtime.openURL(openUrl);\n                                        let params = {\n\t\t\t\t\t\t\t\t            internal_payment_sn:this.list.internal_payment_sn\n\t\t\t\t\t\t\t            }\n                                        orderModel.yuonpay(params).then((res) => {\n                                            if (res.code == 200) {\n                                                uni.showToast({\n                                                    title:'支付成功',\n                                                })\n                                                setTimeout(()=>{\n                                                     uni.navigateTo({\n                                                        url:`/pagesC/payment_finish/payment_finish?internal_payment_sn=${this.list.internal_payment_sn}`\n                                                    })\n                                                },2000)\n                                            }\n\t\t\t\t\t\t\t            })\n                                    }\n                                }\n                            })\n                        }\n                    } else {\n                        let data = {\n                            internal_payment_sn:this.list.internal_payment_sn,\n                            type:1\n                        }\n                        orderModel.subPay(data).then((res) => {\n                            this._pay(res.data)\n                        })\n                    }\n                    \n                }\n            },\n             _provider(){\n               return new Promise((resolve,reject)=>{\n                    uni.getProvider({\n                        service: 'payment',\n                        success: function (res) {\n                            console.log(res.provider[0])\n                            resolve(res.provider[0])\n                        }}\n                    )\n                })\n\n            },\n           async _pay(list){\n                const data = JSON.parse(list)\n                // let SystemInfo = uni.getStorageSync('SystemInfo')\n                let provider = await this._provider()\n               console.log(provider)\n                uni.requestPayment({\n                    provider,\n                    timeStamp: data.timeStamp,\n                    nonceStr: data.nonceStr,\n                    package: data.package,\n                    signType: 'MD5',\n                    paySign: data.paySign,\n                    success: function (res) {\n                        console.log('success:' + JSON.stringify(res));\n                    },\n                    fail: function (err) {\n                        console.log('fail:' + JSON.stringify(err));\n                    }\n                })\n            },\n            radioChange(id){\n                if(this.list.pay_type == 2 && id == \"1\") {\n                    this.pay_checked = false\n                    uni.showToast({\n                        title:'余额不足',\n                        icon:'none'\n                    })\n                } else {\n                    this.pay_checked = id\n                }\n            },\n            _getOrder(internal_payment_sn){\n                let data={\n                    internal_payment_sn : internal_payment_sn\n                }\n                orderModel.getOrders(data).then((res) => {\n                    if(res.data){\n                        this.list = res.data\n                        this.balance_lock = res.data.pay_type == 2 ? true : false;\n                        this.pay_checked = this.list.pay_type\n                    }\n\n                })\n            },\n            _getAnnualReview(internal_payment_sn){\n                let data={\n                    internal_payment_sn : internal_payment_sn\n                }\n                orderModel.getAnnualReview(data).then((res) => {\n                    if(res.data){\n                        this.list = res.data\n                        this.balance_lock = res.data.pay_type == 2 ? true : false;\n                        this.pay_checked = this.list.pay_type\n                    }\n\n                })\n            }\n        },\n        onLoad(option){\n            switch(option.type){\n                case 'commodity':\n                    this._getOrder(JSON.parse(option.data))\n                    break;\n                case 'annual_review':\n                    this._getAnnualReview(JSON.parse(option.data))\n                    break;\n            }\n            \n        }\n    }\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&id=441cfec9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&id=441cfec9&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1571385027219\n      var cssReload = require(\"C:/Users/Administrator/Desktop/tgcb_uni_app/tgcb_uni_app/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}